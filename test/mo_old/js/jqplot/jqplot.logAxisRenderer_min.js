(function(g){g.jqplot.LogAxisRenderer=function(){g.jqplot.LinearAxisRenderer.call(this);this.axisDefaults={base:10,tickDistribution:"even"}};g.jqplot.LogAxisRenderer.prototype=new g.jqplot.LinearAxisRenderer;g.jqplot.LogAxisRenderer.prototype.constructor=g.jqplot.LogAxisRenderer;g.jqplot.LogAxisRenderer.prototype.init=function(c){g.extend(!0,this.renderer,c);for(var d in this.renderer.axisDefaults)null==this[d]&&(this[d]=this.renderer.axisDefaults[d]);for(var c=this._dataBounds,b=0;b<this._series.length;b++){d= this._series[b].data;for(var e=0;e<d.length;e++)if("xaxis"==this.name||"x2axis"==this.name){if(d[e][0]>c.max||null==c.max)c.max=d[e][0];if(d[e][0]>c.max||null==c.max)c.max=d[e][0]}else{if(d[e][1]<c.min||null==c.min)c.min=d[e][1];if(d[e][1]>c.max||null==c.max)c.max=d[e][1]}}};g.jqplot.LogAxisRenderer.prototype.createTicks=function(){var c=this.ticks,d=this.name,b=this._dataBounds,e;if(c.length){for(d=0;d<c.length;d++)e=c[d],b=new this.tickRenderer(this.tickOptions),e.constructor==Array?(b.value=e[0], b.label=e[1],this.showTicks?this.showTickMarks||(b.showMark=!1):(b.showLabel=!1,b.showMark=!1),b.setTick(e[0],this.name)):(b.value=e,this.showTicks?this.showTickMarks||(b.showMark=!1):(b.showLabel=!1,b.showMark=!1),b.setTick(e,this.name)),this._ticks.push(b);this.numberTicks=c.length;this.min=this._ticks[0].value;this.max=this._ticks[this.numberTicks-1].value}else{d="xaxis"==d||"x2axis"==d?this._plotDimensions.width:this._plotDimensions.height;c=null!=this.min?this.min:b.min;b=null!=this.max?this.max: b.max;c==b&&(c*=0.95,b*=1.05);if(null!=this.min&&0>=this.min)throw"log axis minimum must be greater than 0";if(null!=this.max&&0>=this.max)throw"log axis maximum must be greater than 0";if("even"==this.tickDistribution){c=null!=this.min?this.min:c-c*((this.padMin-1)/2);b=null!=this.max?this.max:b+b*((this.padMax-1)/2);this.min=c;this.max=b;null==this.numberTicks&&(this.numberTicks=100<d?parseInt(3+(d-100)/75,10):2);c=Math.pow(this.base,1/(this.numberTicks-1)*Math.log(this.max/this.min)/Math.log(this.base)); for(d=0;d<this.numberTicks;d++)e=this.min*Math.pow(c,d),b=new this.tickRenderer(this.tickOptions),this.showTicks?this.showTickMarks||(b.showMark=!1):(b.showLabel=!1,b.showMark=!1),b.setTick(e,this.name),this._ticks.push(b)}else if("power"==this.tickDistribution){c=Math.pow(this.base,Math.ceil(Math.log(c*(2-this.padMin))/Math.log(this.base))-1);b=Math.pow(this.base,Math.floor(Math.log(b*this.padMax)/Math.log(this.base))+1);this.min=c;this.max=b;c=b=0;null==this.numberTicks&&(100<d?(this.numberTicks= Math.round(Math.log(this.max/this.min)/Math.log(this.base)+1),2>this.numberTicks&&(this.numberTicks=2),b=parseInt(3+(d-100)/75,10)):b=this.numberTicks=2,this.numberTicks<b-1&&(c=Math.floor(b/this.numberTicks)));for(d=0;d<this.numberTicks;d++)if(e=Math.pow(this.base,d-this.numberTicks+1)*this.max,b=new this.tickRenderer(this.tickOptions),this.showTicks?this.showTickMarks||(b.showMark=!1):(b.showLabel=!1,b.showMark=!1),b.setTick(e,this.name),this._ticks.push(b),c&&d<this.numberTicks-1){var g=Math.pow(this.base, d-this.numberTicks+2)*this.max;e=g/(c+1);for(var j=c-1;0<=j;j--){var k=g-e*(j+1),b=new this.tickRenderer(this.tickOptions);this.showTicks?this.showTickMarks||(b.showMark=!1):(b.showLabel=!1,b.showMark=!1);b.setTick(k,this.name);this._ticks.push(b)}}}}};g.jqplot.LogAxisRenderer.prototype.pack=function(c,d){var b=parseInt(this.base,10),e=this._ticks,m=function(a){return Math.log(a)/Math.log(b)},j=function(a){return Math.pow(Math.E,Math.log(b)*a)};max=m(this.max);min=m(this.min);var k=d.max,n=d.min, o=null==this._label?!1:this._label.show,a;for(a in c)this._elem.css(a,c[a]);this._offsets=d;var h=k-n,l=max-min;this.p2u=function(a){return j((a-n)*l/h+min)};this.u2p=function(a){return(m(a)-min)*h/l+n};"xaxis"==this.name||"x2axis"==this.name?(this.series_u2p=function(a){return(m(a)-min)*h/l},this.series_p2u=function(a){return j(a*l/h+min)}):(this.series_u2p=function(a){return(m(a)-max)*h/l},this.series_p2u=function(a){return j(a*l/h+max)});if(this.show)if("xaxis"==this.name||"x2axis"==this.name){for(i= 0;i<e.length;i++)if(a=e[i],a.show&&a.showLabel){var f;if(a.constructor==g.jqplot.CanvasAxisTickRenderer&&a.angle)switch(a.labelPosition){case "auto":f=0>a.angle?-a.getWidth()+a._textRenderer.height*Math.sin(-a._textRenderer.angle)/2:-a._textRenderer.height*Math.sin(a._textRenderer.angle)/2;break;case "end":f=-a.getWidth()+a._textRenderer.height*Math.sin(-a._textRenderer.angle)/2;break;case "start":f=-a._textRenderer.height*Math.sin(a._textRenderer.angle)/2;break;case "middle":f=-a.getWidth()/2+a._textRenderer.height* Math.sin(-a._textRenderer.angle)/2;break;default:f=-a.getWidth()/2+a._textRenderer.height*Math.sin(-a._textRenderer.angle)/2}else f=-a.getWidth()/2;f=this.u2p(a.value)+f+"px";a._elem.css("left",f);a.pack()}o&&(k=this._label._elem.outerWidth(!0),this._label._elem.css("left",n+h/2-k/2+"px"),"xaxis"==this.name?this._label._elem.css("bottom","0px"):this._label._elem.css("top","0px"),this._label.pack())}else{for(i=0;i<e.length;i++)if(a=e[i],a.show&&a.showLabel){if(a.constructor==g.jqplot.CanvasAxisTickRenderer&& a.angle)switch(a.labelPosition){case "auto":case "end":f=0>a.angle?-a._textRenderer.height*Math.cos(-a._textRenderer.angle)/2:-a.getHeight()+a._textRenderer.height*Math.cos(a._textRenderer.angle)/2;break;case "start":f=0<a.angle?-a._textRenderer.height*Math.cos(-a._textRenderer.angle)/2:-a.getHeight()+a._textRenderer.height*Math.cos(a._textRenderer.angle)/2;break;case "middle":f=-a.getHeight()/2;break;default:f=-a.getHeight()/2}else f=-a.getHeight()/2;f=this.u2p(a.value)+f+"px";a._elem.css("top", f);a.pack()}o&&(e=this._label._elem.outerHeight(!0),this._label._elem.css("top",k-h/2-e/2+"px"),"yaxis"==this.name?this._label._elem.css("left","0px"):this._label._elem.css("right","0px"),this._label.pack())}}})(jQuery);